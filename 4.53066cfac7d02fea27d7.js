(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{kOTX:function(t,n,e){"use strict";e.r(n),e.d(n,"FtLinearRegressionModule",function(){return b});var i=e("ofXK"),o=e("tyNb"),r=e("mrSG"),a=e("fXoL"),s=e("DKVz");function l(t,n){if(1&t&&a.Fb(0,"div",13),2&t){const t=a.Pb();a.Qb("options",t.options)("merge",t.mergeOptions)}}function c(t,n){if(1&t&&(a.Hb(0,"div",14),a.Yb(1),a.Gb()),2&t){const t=a.Pb();a.vb(1),a.Zb(t.error)}}function h(t,n){if(1&t&&(a.Hb(0,"div",15),a.Yb(1," Estimate Price: "),a.Hb(2,"span",9),a.Yb(3),a.Gb(),a.Gb()),2&t){const t=a.Pb();a.vb(3),a.Zb(t.estimatePrice(t.mileage))}}function p(t,n){if(1&t){const t=a.Ib();a.Hb(0,"div",2),a.Hb(1,"div",16),a.Nb("click",function(){return a.Ub(t),a.Pb().train()}),a.Yb(2,"Train"),a.Gb(),a.Hb(3,"input",17,18),a.Nb("change",function(){a.Ub(t);const n=a.Sb(4);return a.Pb().learningRate=+n.value}),a.Gb(),a.Hb(5,"label",19),a.Yb(6),a.Gb(),a.Hb(7,"div",20),a.Yb(8," Iterations: "),a.Hb(9,"span",9),a.Yb(10),a.Gb(),a.Gb(),a.Hb(11,"div",16),a.Nb("click",function(){return a.Ub(t),a.Pb().reset()}),a.Yb(12,"Reset"),a.Gb(),a.Gb()}if(2&t){const t=a.Pb();a.vb(3),a.Qb("value",t.learningRate),a.vb(3),a.ac(" ",t.learningRate," "),a.vb(4),a.Zb(t.counter)}}const d=[{path:"",component:(()=>{class t{constructor(){this.counter=0,this.active=!1,this.error="",this.data={origin:[],normalize:[]},this.normalizeTheta=[0,0],this.theta=[0,0],this.learningRate=.5,this.mergeOptions={},this.options={},this.bounds={xAxis:{min:1/0,max:-1/0},yAxis:{min:1/0,max:-1/0}},this.exactBounds=new Array(4)}static round(t,n=!1){const e=Math.pow(10,Math.trunc(Math.log10(t)));return(Math.trunc(t/e)+(n?0:1))*e}onBodyDragLeave(){this.active=!1}onBodyDragOver(t){t.preventDefault(),t.stopPropagation(),this.active=!0}onBodyDrop(n){var e;this.active=!1,this.theta=[0,0],this.normalizeTheta=[0,0],n.preventDefault();const i=null===(e=n.dataTransfer)||void 0===e?void 0:e.files[0];if(i){const n=new FileReader;n.onload=()=>{let e=-1/0,i=-1/0,o=1/0,r=1/0;const a=n.result.split(/[\r]?\n/).map(t=>t.trim()).filter(t=>t.length);a.length&&(this.title=a.splice(0,1)[0].split(","),this.data.origin=a.map(t=>{const[n,a]=t.split(",").map(t=>parseFloat(t));return n>e&&(e=n),n<o&&(o=n),a>i&&(i=a),a<r&&(r=a),[n,a]}),this.exactBounds=[o,r,e,i],this.data.normalize=this.data.origin.map(([t,n])=>[(t-o)/(e-o),(n-r)/(i-r)]),[o,r]=[o,r].map(n=>t.round(n,!0)),[e,i]=[e,i].map(n=>t.round(n)),this.bounds={xAxis:{min:o,max:e},yAxis:{min:r,max:i}},this.mergeOptions=this.optionsSupplier())};try{n.readAsText(i)}catch(o){this.error=o.message}}}updateMileage(t){this.mileage=t,this.mergeOptions=this.optionsSupplier()}optionsSupplier(){return{title:{text:"Data",left:"center",top:0},grid:[{left:"7%",top:"7%",width:"38%",height:"86%"},{right:"7%",top:"7%",width:"38%",height:"86%"}],xAxis:[Object.assign({gridIndex:0},this.bounds.xAxis),{gridIndex:1,min:0,max:1}],yAxis:[Object.assign({gridIndex:0},this.bounds.yAxis),{gridIndex:1,min:0,max:1}],tooltip:[{zlevel:0,z:60,formatter:"({c})",show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{color:"#666",fontSize:14}}}}],series:[{type:"effectScatter",symbolSize:15,data:[[this.mileage,this.estimatePrice(this.mileage)]],tooltip:{show:!0,formatter:({data:t})=>{var n;return(null===(n=this.title)||void 0===n?void 0:n[1])+": "+t[1]},bottom:10}},{name:"data",type:"scatter",xAxisIndex:0,yAxisIndex:0,data:this.data.origin,color:"red",legendHoverLink:!0,clip:!0,label:{position:"top"},tooltip:{formatter:({data:t})=>{var n,e;return(null===(n=this.title)||void 0===n?void 0:n[0])+": "+t[0]+",  "+(null===(e=this.title)||void 0===e?void 0:e[1])+": "+t[1]}},markLine:{animation:!1,lineStyle:{type:"solid",color:"purple"},tooltip:{formatter:"y = "+this.theta[0]+" + "+this.theta[1]+" * x"},data:[[{coord:(()=>{let t=this.bounds.xAxis.min,n=this.estimatePrice(t);return n>this.bounds.yAxis.max&&(t=(this.bounds.yAxis.max-this.theta[0])/this.theta[1]*1.0001,n=this.estimatePrice(t)),[t,n]})(),symbol:"none"},{coord:(()=>{let t=this.bounds.xAxis.max,n=this.estimatePrice(t);return n<this.bounds.yAxis.min&&(t=(this.bounds.yAxis.min-this.theta[0])/this.theta[1]*.999,n=this.estimatePrice(t)),[t,n]})(),symbol:"none"}]]}},{name:"normalizeData",type:"scatter",xAxisIndex:1,yAxisIndex:1,data:this.data.normalize,color:"red",legendHoverLink:!0,clip:!0,label:{position:"top"},tooltip:{formatter:({data:t})=>{var n,e;return(null===(n=this.title)||void 0===n?void 0:n[0])+": "+t[0]+",  "+(null===(e=this.title)||void 0===e?void 0:e[1])+": "+t[1]}},markLine:{animation:!1,label:{formatter:"R\xb2 = "+this.getR(),align:"right"},lineStyle:{color:"green",type:"solid"},tooltip:{formatter:"y = "+this.normalizeTheta[0]+" + "+this.normalizeTheta[1]+" * x"},data:[[{coord:(()=>{let t=0,n=this.normalizeEstimatePrice(t);return n>1&&(t=(1-this.normalizeTheta[0])/this.normalizeTheta[1]*1.0001,n=this.normalizeEstimatePrice(t)),[t,n]})(),symbol:"none"},{coord:(()=>{let t=1,n=this.normalizeEstimatePrice(t);return n<0&&(t=-this.normalizeTheta[0]/this.normalizeTheta[1]*.999,n=this.normalizeEstimatePrice(t)),[t,n]})(),symbol:"none"}]]}}]}}train(){return Object(r.a)(this,void 0,void 0,function*(){let t=1;const n=this.learningRate*this.learningRate*1e-10;for(;Math.abs(t)>n;++this.counter){const n=this.learningRate/this.data.normalize.length*this.data.normalize.reduce((t,n)=>t+(this.normalizeEstimatePrice(n[0])-n[1]),0),e=this.learningRate/this.data.normalize.length*this.data.normalize.reduce((t,n)=>t+(this.normalizeEstimatePrice(n[0])-n[1])*n[0],0);t=n*n+e*e;const[i,o,r,a]=this.exactBounds;this.normalizeTheta=[this.normalizeTheta[0]-n,this.normalizeTheta[1]-e],this.theta[1]=(a-o)*this.normalizeTheta[1]/(r-i),this.theta[0]=o+(a-o)*this.normalizeTheta[0]+this.theta[1]*(1-i),this.mergeOptions=this.optionsSupplier(),this.counter%1e3==0&&(yield new Promise(t=>setTimeout(t,100)))}})}reset(){this.theta=[0,0],this.normalizeTheta=[0,0],this.counter=0,this.mergeOptions=this.optionsSupplier()}estimatePrice(t=0){const n="string"==typeof t?parseFloat(t):t;return this.theta[0]+this.theta[1]*n}normalizeEstimatePrice(t=0){const n="string"==typeof t?parseFloat(t):t;return this.normalizeTheta[0]+this.normalizeTheta[1]*n}getR(){return(100*(1-this.data.normalize.reduce((t,n)=>t+Math.pow(n[1]-this.normalizeEstimatePrice(n[0]),2),0)/this.data.normalize.length)).toString().substring(0,4)+"%"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=a.yb({type:t,selectors:[["app-ft-linear-regression-train"]],hostBindings:function(t,n){1&t&&a.Nb("dragleave",function(){return n.onBodyDragLeave()},!1,a.Tb)("dragover",function(t){return n.onBodyDragOver(t)},!1,a.Tb)("drop",function(t){return n.onBodyDrop(t)},!1,a.Tb)},decls:32,vars:6,consts:[["echarts","","class","chart",3,"options","merge",4,"ngIf"],["class","error",4,"ngIf"],[1,"info"],["type","number",1,"input",3,"keyup"],["inputElement",""],["class","estimate-price",4,"ngIf"],[1,"thetas"],[1,"theta"],[1,"pretty"],[1,"calc"],["href","assets/data.csv","download","data.csv","target","_blank",1,"demo"],[1,"btn"],["class","info",4,"ngIf"],["echarts","",1,"chart",3,"options","merge"],[1,"error"],[1,"estimate-price"],[1,"btn",3,"click"],["id","range","type","range","max","1","min",".0001","step",".0001",1,"range",3,"value","change"],["rangeValue",""],["for","range"],[1,"iterations"]],template:function(t,n){if(1&t){const t=a.Ib();a.Xb(0,l,1,2,"div",0),a.Xb(1,c,2,1,"div",1),a.Hb(2,"div",2),a.Hb(3,"label"),a.Yb(4," Enter Mileage: "),a.Hb(5,"input",3,4),a.Nb("keyup",function(){a.Ub(t);const e=a.Sb(6);return n.updateMileage(e.value)}),a.Gb(),a.Gb(),a.Xb(7,h,4,1,"div",5),a.Hb(8,"div",6),a.Hb(9,"div",7),a.Yb(10," ["),a.Hb(11,"span",8),a.Yb(12,"\u03b8"),a.Hb(13,"sub"),a.Yb(14,"0"),a.Gb(),a.Gb(),a.Yb(15,": "),a.Hb(16,"span",9),a.Yb(17),a.Gb(),a.Yb(18,", "),a.Gb(),a.Hb(19,"div",7),a.Hb(20,"span",8),a.Yb(21,"\u03b8"),a.Hb(22,"sub"),a.Yb(23,"1"),a.Gb(),a.Gb(),a.Yb(24,": "),a.Hb(25,"span",9),a.Yb(26),a.Gb(),a.Yb(27,"] "),a.Gb(),a.Gb(),a.Hb(28,"a",10),a.Hb(29,"div",11),a.Yb(30,"Demo"),a.Gb(),a.Gb(),a.Gb(),a.Xb(31,p,13,3,"div",12)}if(2&t){const t=a.Sb(6);a.Qb("ngIf",n.data.origin.length),a.vb(1),a.Qb("ngIf",n.error),a.vb(6),a.Qb("ngIf",t.value),a.vb(10),a.ac(" ",n.theta[0],""),a.vb(9),a.Zb(n.theta[1]),a.vb(5),a.Qb("ngIf",n.data.origin.length)}},directives:[i.h,s.a],styles:["[_nghost-%COMP%]   .error[_ngcontent-%COMP%]{color:red;font-size:1.5rem;font-style:italic}[_nghost-%COMP%]   .chart[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.2784313725490196)}[_nghost-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, [_nghost-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}[_nghost-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;gap:2rem;padding:1rem 2rem 2rem;align-items:center}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .demo[_ngcontent-%COMP%]{margin-left:auto}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{width:200px;margin:5.85px 0;background-color:initial;-webkit-appearance:none}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]:focus{outline:none}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{background:#1042a2;border:1.1px solid #1042a2;border-radius:1px;width:100%;height:11.3px;cursor:pointer}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{margin-top:-6.95px;width:23px;height:23px;background:purple;border:1.6px solid #3e033e;border-radius:12px;cursor:pointer;-webkit-appearance:none}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]:focus::-webkit-slider-runnable-track{background:#1044a7}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-moz-range-track{background:#1042a2;border:1.1px solid #1042a2;border-radius:1px;width:100%;height:11.3px;cursor:pointer}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-moz-range-thumb{width:23px;height:23px;background:purple;border:1.6px solid #3e033e;border-radius:12px;cursor:pointer}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-ms-track{background:transparent;border-color:transparent;border-width:8.45px 0;color:transparent;width:100%;height:11.3px;cursor:pointer}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-ms-fill-lower{background:#10409d;border:1.1px solid #10409d;border-radius:2px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-ms-fill-upper{background:#1042a2;border:1.1px solid #10409d;border-radius:2px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]::-ms-thumb{width:23px;height:23px;background:purple;border:1.6px solid #3e033e;border-radius:12px;cursor:pointer;margin-top:0}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]:focus::-ms-fill-lower{background:#1042a2}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]:focus::-ms-fill-upper{background:#1044a7}@supports (-ms-ime-align:auto){[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{margin:0}}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{cursor:pointer;background-color:purple;padding:.5rem 1rem;border-radius:5px;box-shadow:2px 2px 5px #390439}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{box-shadow:1px 1px 1px #390439}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .thetas[_ngcontent-%COMP%]{display:flex;gap:.5rem}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .thetas[_ngcontent-%COMP%]   .pretty[_ngcontent-%COMP%]{font-style:italic}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{background-color:initial;border-bottom:1px solid purple;color:#540254;font-size:inherit}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .calc[_ngcontent-%COMP%]{color:#540254}"]}),t})()}];let g=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=a.Cb({type:t}),t.\u0275inj=a.Bb({imports:[[o.a.forChild(d)],o.a]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=a.Cb({type:t}),t.\u0275inj=a.Bb({imports:[[i.b,g,s.b]]}),t})()}}]);